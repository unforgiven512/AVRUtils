/*
 * AVRUtils.ino -- a very simple demonstration of the library's functionality
 */

#include <AVRUtils.h>


#define SERIAL_BAUD_RATE 115200
#define SERIAL_WAIT_FOR_CONNECTION 1
#define LED_PIN 13


volatile uint32_t reading_number;
char data_output[200];


AVRUtils avr;



void setup() {
	Serial.begin(SERIAL_BAUD_RATE);

#if (SERIAL_WAIT_FOR_CONNECTION == 1)
	while (!Serial);
#endif

	avr.begin();
}

void loop() {
	digitalWrite(LED_PIN, HIGH);
	delay(500);
	digitalWrite(LED_PIN, LOW);
	delay(500);

	sprintf(data_output, "\n\n-------------------------\nReading #:\t%ul\nAVR TempF:\t%fF\nVoltage:\t%f\n", reading_number++, avr.getAVRTemp(), avr.getAVRVcc());
	Serial.print(data_output);
/*
	Serial.print(F("AVR temp is "));
	Serial.print(avr.getAVRTemp());
	Serial.println(F(" *F"));

	Serial.print(F("AVR Vcc is "));
	Serial.print(avr.getAVRVcc());
	Serial.println(F(" mV"));
*/
}
